# Self-Healing Entity

## 목적
Docker 컨테이너의 셀프 힐링(자가 복구) 기능과 관련된 도메인 로직과 데이터 모델을 관리합니다.

## 책임 범위
- 컨테이너 헬스 상태 모델 정의
- 힐링 프로세스 단계 및 이벤트 타입 정의
- 셀프 힐링 시뮬레이션 상태 관리
- 복구 타임라인 및 컨테이너 상태 시각화 UI 컴포넌트 제공

## 폴더 구조

### `/types.ts`
셀프 힐링과 관련된 모든 TypeScript 타입 정의:
- `ContainerHealth`: 컨테이너 헬스 상태 정보
- `HealingStep`: 복구 프로세스의 각 단계
- `HealingEvent`: 복구 과정 중 발생하는 이벤트
- `SelfHealingSimulation`: 시뮬레이션 전체 상태
- `HealingScenario`: 장애 시나리오 정의

### `/api/`
셀프 힐링 데이터 API 관련 함수들:
- `fetch-healing-simulation.ts`: 시뮬레이션 데이터 조회 및 시나리오 목 데이터 생성

### `/ui/`
셀프 힐링 관련 UI 컴포넌트들:
- `healing-timeline.tsx`: 복구 프로세스 단계별 타임라인
- `container-health-status.tsx`: 컨테이너 헬스 상태 시각화

### `/index.ts`
엔티티의 공개 인터페이스 (타입, API, UI 컴포넌트 export)

## 주요 기능
1. **복구 프로세스 시각화**: 5단계 복구 과정을 타임라인으로 표시
2. **컨테이너 상태 모니터링**: 실시간 헬스 상태 및 하트비트 애니메이션
3. **장애 시나리오 지원**: 컨테이너 크래시, 헬스체크 실패, 노드 장애 시나리오
4. **복구 통계**: 복구 시간, 다운타임 등 주요 지표 추적

## 복구 단계
1. **장애 감지**: 헬스체크 실패 감지 및 컨테이너 상태 확인
2. **장애 컨테이너 격리**: 트래픽에서 장애 컨테이너 제외
3. **컨테이너 재시작**: 장애 컨테이너 재시작 시도
4. **헬스체크 확인**: 재시작된 컨테이너 상태 검증
5. **서비스 복구**: 정상 상태 확인 후 트래픽 재라우팅

## 지원 시나리오
- **컨테이너 크래시**: 애플리케이션 오류로 인한 컨테이너 종료
- **헬스체크 실패**: 헬스체크 엔드포인트 응답 실패
- **노드 장애**: 워커 노드 전체 장애 발생 (추가 재배치 단계 포함)

## 확장 가이드
- 새로운 장애 시나리오 추가 시 `HealingScenario` 타입 확장
- 복구 단계 추가 시 `HealingStep` 구조 수정
- 추가 시각화 컴포넌트는 `/ui/` 폴더에 추가
- 새로운 헬스 상태 추가 시 `ContainerHealth` 인터페이스 확장 