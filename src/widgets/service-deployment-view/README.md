# 서비스 배포 시각화 위젯 (Service Deployment View Widget)

이 폴더는 Docker Swarm 서비스 배포 과정을 시각적으로 표현하는 위젯을 포함합니다.

## 디렉토리 구조

```
service-deployment-view/
├── ui/
│   └── service-deployment-view.tsx  # 메인 시각화 위젯
├── README.md                        # 이 파일
└── index.ts                         # 공개 인터페이스
```

## 위젯 기능

### ServiceDeploymentView
서비스 배포 과정을 단계별로 시각화하는 메인 위젯입니다.

**주요 기능:**
- 배포 시뮬레이션 데이터 로드 및 관리
- 시뮬레이션 제어 (시작/일시정지/초기화)
- 실시간 배포 과정 애니메이션
- 클러스터 노드 및 컨테이너 시각화
- 로드 밸런서 트래픽 흐름 표시
- 배포 통계 정보 제공

**시각화 요소:**

1. **노드 구성**
   - 매니저 노드 (회색 박스)
   - 워커 노드들 (회색 박스)
   - 노드별 레이블 표시

2. **로드 밸런서**
   - 파란색 박스로 표시
   - 트래픽 분산 시작점

3. **컨테이너 레플리카**
   - 상태별 색상 구분
   - 배포 과정 애니메이션
   - 노드별 배치 시각화

4. **트래픽 흐름**
   - 곡선 경로로 표현
   - 가중치별 선 두께
   - 데이터 패킷 애니메이션

**배포 단계:**

1. **이미지 풀링** (3초)
   - 각 노드에서 컨테이너 이미지 다운로드
   - 레플리카 상태: pending → pulling

2. **컨테이너 생성** (2초)
   - 레플리카 수에 따라 컨테이너 생성
   - 레플리카 상태: pulling → starting

3. **서비스 시작** (2.5초)
   - 컨테이너 시작 및 헬스체크
   - 레플리카 상태: starting → running

4. **로드 밸런서 설정** (1.5초)
   - 트래픽 라우팅 규칙 설정
   - 트래픽 흐름 활성화

## 레이아웃 구성

위젯은 다음과 같은 레이아웃으로 구성됩니다:

```
┌─────────────────────────────────────────────────────────┐
│                    제어 패널                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│                  시각화 영역                              │
│              (SVG 기반 다이어그램)                         │
│                                                         │
├─────────────────────────────────────────────────────────┤
│              통계 정보 카드들                             │
└─────────────────────────────────────────────────────────┘
```

**그리드 레이아웃:**
- 제어 패널: 1/3 너비 (lg:col-span-1)
- 시각화 영역: 2/3 너비 (lg:col-span-2)
- 통계 카드: 3개 균등 분할

## 상태 관리

위젯은 다음과 같은 상태를 관리합니다:

- **simulation**: 전체 시뮬레이션 데이터
- **loading**: 데이터 로딩 상태
- **error**: 오류 상태
- **isRunning**: 시뮬레이션 실행 여부
- **currentStep**: 현재 진행 단계

## 애니메이션 시스템

### 단계별 애니메이션
각 배포 단계마다 다른 애니메이션이 실행됩니다:

1. **이미지 풀링**: 모든 레플리카가 'pulling' 상태로 변경
2. **컨테이너 생성**: 모든 레플리카가 'starting' 상태로 변경
3. **서비스 시작**: 모든 레플리카가 'running' 상태로 변경
4. **로드 밸런서**: 트래픽 흐름이 활성화

### 시각적 효과
- 상태 변경 시 부드러운 색상 전환
- 트래픽 패킷의 경로 애니메이션
- 컨테이너 상태 아이콘 변화

## 통계 정보

위젯 하단에 다음 통계가 표시됩니다:

1. **총 레플리카**: 배포된 컨테이너 총 개수
2. **활성 연결**: 현재 활성화된 트래픽 연결 수
3. **실행중**: 정상 실행 중인 컨테이너 수

## 오류 처리

- 데이터 로딩 실패 시 오류 메시지 표시
- 재시도 버튼 제공
- 로딩 중 스피너 표시

## 반응형 디자인

- 모바일: 세로 스택 레이아웃
- 태블릿/데스크톱: 가로 그리드 레이아웃
- SVG 뷰박스로 확대/축소 대응

## 사용 예시

```typescript
import { ServiceDeploymentView } from '@/widgets/service-deployment-view';

<ServiceDeploymentView />
```

## 확장 가능성

이 위젯은 다음과 같이 확장할 수 있습니다:

- 실제 Docker API 연동
- 다양한 배포 전략 시각화
- 실시간 메트릭 표시
- 배포 히스토리 재생
- 3D 시각화 지원 