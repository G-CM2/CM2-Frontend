# Self-Healing Simulation View Widget

## 목적
셀프 힐링 시뮬레이션의 전체 화면 레이아웃과 상태 관리를 담당하는 위젯입니다.

## 책임 범위
- 셀프 힐링 시뮬레이션 전체 화면 구성
- 시뮬레이션 상태 관리 및 복구 프로세스 실행
- 제어 패널과 시각화 컴포넌트 통합
- 장애 시나리오별 복구 로직 처리

## 폴더 구조

### `/ui/`
셀프 힐링 시뮬레이션 뷰 관련 UI 컴포넌트들:
- `self-healing-simulation-view.tsx`: 메인 시뮬레이션 뷰 컴포넌트

### `/index.ts`
위젯의 공개 인터페이스 (UI 컴포넌트 export)

## 주요 기능

### SelfHealingSimulationView 컴포넌트
1. **시뮬레이션 상태 관리**:
   - 시뮬레이션 데이터 및 시나리오 로드
   - 복구 프로세스 단계별 진행 관리
   - 복구 시간 및 다운타임 추적

2. **레이아웃 구성**:
   - 3열 그리드 레이아웃 (제어 패널 1열, 시각화 2열)
   - 반응형 디자인 (모바일에서는 1열로 변경)
   - 카드 기반 섹션 구분

3. **복구 프로세스 실행**:
   - 2초마다 다음 단계로 진행
   - 5단계 복구 과정 (감지→격리→재시작→확인→복구)
   - 시나리오별 다운타임 계산

4. **사용자 인터랙션**:
   - 장애 시나리오 선택
   - 시뮬레이션 시작/일시정지/초기화
   - 실시간 진행률 및 통계 표시

## 통합 컴포넌트
- `HealingControls`: 시뮬레이션 제어 패널
- `HealingTimeline`: 복구 프로세스 타임라인
- `ContainerHealthStatus`: 컨테이너 헬스 상태 시각화

## 지원 시나리오
1. **컨테이너 크래시**:
   - 예상 다운타임: 10초
   - 5단계 복구 프로세스

2. **헬스체크 실패**:
   - 예상 다운타임: 8초
   - 5단계 복구 프로세스

3. **노드 장애**:
   - 예상 다운타임: 15초
   - 6단계 복구 프로세스 (재배치 단계 추가)

## 복구 프로세스
1. **장애 감지** (2초): 헬스체크 실패 감지 및 컨테이너 상태 확인
2. **장애 컨테이너 격리** (1.5초): 트래픽에서 장애 컨테이너 제외
3. **컨테이너 재시작** (3초): 장애 컨테이너 재시작 시도
4. **헬스체크 확인** (2.5초): 재시작된 컨테이너 상태 검증
5. **서비스 복구** (1초): 정상 상태 확인 후 트래픽 재라우팅
6. **새 노드에 재배치** (4초): 노드 장애 시에만 추가 실행

## 상태 추적
- **복구 시간**: 전체 복구 프로세스 소요 시간
- **다운타임**: 서비스 중단 시간 (첫 번째 단계부터 마지막 단계까지)
- **현재 단계**: 진행 중인 복구 단계
- **진행률**: 전체 복구 과정의 완료 비율

## 의존성
- `@/entities/self-healing`: 셀프 힐링 도메인 로직
- `@/features/self-healing-simulation`: 시뮬레이션 제어 기능
- `@/components/ui`: shadcn/ui 컴포넌트들

## 확장 가이드
- 새로운 장애 시나리오 추가 시 시나리오 데이터 확장
- 추가 복구 단계는 시나리오별로 정의
- 복잡한 복구 로직은 별도 서비스로 분리 고려
- 실제 환경 연동 시 API 엔드포인트 교체 